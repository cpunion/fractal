machine:
  node:
    version: 4.2.2

dependencies:
# Use npm@3 to resolve dependency collisions in react packager step in Apphub
# build (deployment).
  pre:
    - npm install -g npm@3

# Fix for `apphub build ...` (from scripts/releaseTo*.js), which will otherwise
# complain about "wrong-react-native"... >:(
  post:
    - rm ./node_modules/.bin/react-native
    - npm install -g react-native-cli

# Deploy via Apphub
deployment:
  # production:
  #   branch: production
  #   commands:
  #     - node ./scripts/releaseToProduction.js
  staging:
    branch: master
    commands:
      - node ./scripts/releaseToStaging.js
